<!DOCTYPE html>
<html lang='en_US'>
  <head>
    <title>Amanda - Stelfox Athen&#xe6;um</title>

    <meta http-equiv='content-type' content='text/html; charset=utf-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1' />
    
    

    <link rel="alternate" type="application/atom+xml" title="Stelfox Athen&#xe6;um Feed" href="/atom.xml" />
    <link rel="canonical" href="https://stelfox.net" />
    <link rel="author" href="https://plus.google.com/+SamStelfox31337/"/>

    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Amanda" />
    <meta property="og:url" content="https://stelfox.net/knowledge_base/linux/amanda/" />
    <meta property="og:site_name" content="Stelfox Athen&#xe6;um" />
    <meta property="article:publisher" content="https://www.facebook.com/sstelfox" />
    <meta property="og:image" content="https://stelfox.net/static/avatar-01.jpg" />

    <meta name="go-import" content="stelfox.net git https://io.stelfox.net/" />

    <link rel='stylesheet' href="//fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Alegreya+SC:700" />
    <link rel="stylesheet" href="https://stelfox.net/css/3HrCRVwL3Gos2V4HzXAw/Om/nxs=.css" />

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-32188490-1', 'stelfox.net');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header class='masthead'>
      <div class='masthead-inner'>
        <h1><a href='/' title='Home'>Sam Stelfox</a></h1>
        <p class='lead'>Thoughts from a systems hacker and developer.</p>
        <nav>
          <ul>
            <li><a href="/about/" title="About">About</a></li>
            <li><a href="/blog/" title="Blog">Blog</a></li>
            <li><a href="/knowledge_base/" title="Knowledge Base">Knowledge Base</a></li>
            <li><form action="/search/" method="get"><input type="search" name="q" placeholder="Search" /></form></li>
          </ul>
        </nav>
        <footer class='colophon'>
          <p>&copy; 2014, All rights reserved.</p>
        </footer>
      </div>
    </header>
    <div class='content container'>
      <h1>Amanda</h1>

<p>Amanda, or the Advanced Maryland Automatic Network Disk Archiver is an open
source computer archiving tool that is able to back up data residing on
multiple computers on a network.</p>

<h2>Security Notes</h2>

<p>The biggest in your face security hole that I see off the top of my head is
that amanda uses the xinetd to run it&#39;s services. xinetd while more secure than
it&#39;s predecessor inetd, still suffers from the problem that it allows any
arbitrary program to start up automatically and listen on any port (including
privileged ports) for incoming connections, there are many insecure daemons
that are traditionally run from xinetd that I do not want existing on my
network.</p>

<p>Higher security for the rest of the system and a very carefully tuned firewall
is my only defence against this evil service.</p>

<h2>Steps I took</h2>
<div class="CodeRay">
  <div class="code"><pre>yum install amanda amanda-client amanda-server
</pre></div>
</div>

<p>Edit <code>/etc/xinetd.d/amanda</code> and change disable to &#39;no&#39;.</p>

<p>Started xinetd</p>

<p>Verified it opened port <code>10080/udp</code></p>

<p>Opened port <code>10080/udp</code> on firewall for server subnet</p>

<p>Added to <code>/var/lib/amanda/.amandahosts</code>:</p>
<div class="CodeRay">
  <div class="code"><pre>localhost                          amandabackup
backup                             amandabackup
backup.home.bedroomprogrammers.net amandabackup
legba                              root
</pre></div>
</div>

<p>Set permissions on <code>/var/lib/amanda/.amandahosts</code> to <code>600</code> created folder
<code>/opt/backups</code> and changed owner to <code>amandabackup</code> and then I messed something
up... and didn&#39;t document it...</p>

    </div>
  </body>
</html>
